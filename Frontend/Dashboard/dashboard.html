<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./dashboard.css" />
    <link rel="icon" type="image/png" href="../Images/favicon.png" />
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  </head>
  <body>
    <div class="bg-blur-image"></div>

    <div class="dashboard-wrapper animated-gradient-bg">
      <header class="top-bar">
        <h1>
          <span class="material-icons gradient-icon">dashboard</span>
          ScheduleMatePro Dashboard
        </h1>

        <button id="logout-button" class="styled-logout-btn">
          <span class="material-icons">logout</span> Logout
        </button>
      </header>

      <section class="section">
        <h2>My Rooms</h2>
        <div id="my-rooms" class="card-grid"></div>
        <div
          id="no-rooms-message"
          class="empty-state-wrapper"
          style="display: none"
        >
          <lottie-player
            src="../NoRooms.json"
            background="transparent"
            speed="1"
            loop
            autoplay
            class="empty-illustration"
          >
          </lottie-player>
          <p class="empty-msg">You have no rooms yet.</p>
          <p class="empty-msg-secondary">
            Create or join a room below to get started!
          </p>
        </div>
      </section>

      <section class="section">
        <h2>My Upcoming Meetings</h2>
        <ul id="my-meetings" class="meeting-list"></ul>
        <div
          id="no-meetings-message"
          class="empty-state-wrapper"
          style="display: none"
        >
          <lottie-player
            src="../NoMeetings.json"
            background="transparent"
            speed="1"
            loop
            autoplay
            class="empty-illustration"
          >
          </lottie-player>
          <p class="empty-msg">No upcoming meetings scheduled.</p>
          <p class="empty-msg-secondary">
            Submit your availability in a room to help schedule a meeting.
          </p>
        </div>
      </section>

      <section class="section actions">
        <div class="form-block">
          <h3>Create a Room</h3>
          <form id="create-room-form">
            <input
              type="text"
              id="create-room-name"
              placeholder="Room Name"
              required
            />
            <span
              class="error"
              id="roomNameError"
              style="
                display: none;
                margin-top: 5px;
                display: block;
                color: #e53935;
              "
            ></span>
            <button type="submit" class="submit-btn">
              <span class="material-icons">add</span> Create
            </button>
          </form>
        </div>

        <div class="form-block">
          <h3>Join a Room</h3>
          <form id="join-room-form">
            <input
              type="text"
              id="join-room-code"
              placeholder="Room Code"
              required
            />
            <button type="submit" class="submit-btn">
              <span class="material-icons">login</span> Join
            </button>
          </form>
        </div>
      </section>
    </div>

    <div id="welcomeModal" class="modal-overlay" style="display: none">
      <div class="modal">
        <div class="modal-title" id="welcomeModalTitle"></div>
        <div class="modal-body" id="welcomeModalBody"></div>
        <div class="modal-actions">
          <button id="welcomeModalOk" class="modal-btn">OK</button>
        </div>
      </div>
    </div>

    <div id="roomCreatedModal" class="modal-overlay" style="display: none">
      <div class="modal">
        <div class="modal-title" id="roomCreatedModalTitle"></div>
        <div class="modal-body" id="roomCreatedModalBody"></div>
        <div class="modal-actions">
          <button id="roomCreatedModalOk" class="modal-btn">OK</button>
        </div>
      </div>
    </div>

    <div id="logoutModal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <p>Are you sure you want to log out?</p>
        <div class="modal-actions">
          <button onclick="confirmLogout()" class="yes-btn">Yes</button>
          <button onclick="closeLogoutModal()" class="cancel-btn">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <div id="logoutSuccessModal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <p>Logout successful</p>
      </div>
    </div>

    <div id="deleteRoomModal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <p>Are you sure you want to delete this room from your dashboard?</p>
        <div class="modal-actions">
          <button id="confirmDeleteBtn" class="yes-btn">Yes</button>
          <button onclick="closeDeleteModal()" class="cancel-btn">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <div id="deleteSuccessModal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <p>Room deleted successfully</p>
      </div>
    </div>

    <script defer src="./dashboard.js"></script>
  </body>
</html>
